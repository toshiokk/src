# _test_fb -- test Framebuffer color depth of 8,15,16,24,32 BPP(Bits Per Pixel)
# Usage: _test_fb [8|15|16|24|32]
test_fb_32()
{
cnt=0
while [ "$cnt" -lt 1000 ]; do
  echo -ne "\377\000\000\000"
  echo -ne "\377\000\000\000"
  echo -ne "\377\000\000\000"
  echo -ne "\377\000\000\000"
  echo -ne "\000\377\000\000"
  echo -ne "\000\377\000\000"
  echo -ne "\000\377\000\000"
  echo -ne "\000\377\000\000"
  echo -ne "\000\000\377\000"
  echo -ne "\000\000\377\000"
  echo -ne "\000\000\377\000"
  echo -ne "\000\000\377\000"
  echo -ne "\000\000\000\377"
  echo -ne "\000\000\000\377"
  echo -ne "\000\000\000\377"
  echo -ne "\000\000\000\377"
  cnt=$(($cnt+1))
done
}

test_fb_24()
{
cnt=0
while [ "$cnt" -lt 1000 ]; do
  echo -ne "\377\000\000"
  echo -ne "\377\000\000"
  echo -ne "\377\000\000"
  echo -ne "\377\000\000"
  echo -ne "\000\377\000"
  echo -ne "\000\377\000"
  echo -ne "\000\377\000"
  echo -ne "\000\377\000"
  echo -ne "\000\000\377"
  echo -ne "\000\000\377"
  echo -ne "\000\000\377"
  echo -ne "\000\000\377"
  echo -ne "\000\000\000"
  echo -ne "\000\000\000"
  echo -ne "\377\377\377"
  echo -ne "\377\377\377"
  cnt=$(($cnt+1))
done
}

test_fb_16()
{
cnt=0
while [ "$cnt" -lt 1000 ]; do
  echo -ne "\037\000"
  echo -ne "\037\000"
  echo -ne "\037\000"
  echo -ne "\037\000"
  echo -ne "\340\007"
  echo -ne "\340\007"
  echo -ne "\340\007"
  echo -ne "\340\007"
  echo -ne "\000\370"
  echo -ne "\000\370"
  echo -ne "\000\370"
  echo -ne "\000\370"
  echo -ne "\000\200"
  echo -ne "\000\200"
  echo -ne "\000\200"
  echo -ne "\000\200"
  cnt=$(($cnt+1))
done
}

test_fb_15()
{
cnt=0
while [ "$cnt" -lt 1000 ]; do
  echo -ne "\037\000"
  echo -ne "\037\000"
  echo -ne "\037\000"
  echo -ne "\037\000"
  echo -ne "\340\003"
  echo -ne "\340\003"
  echo -ne "\340\003"
  echo -ne "\340\003"
  echo -ne "\000\171"
  echo -ne "\000\171"
  echo -ne "\000\171"
  echo -ne "\000\171"
  echo -ne "\000\200"
  echo -ne "\000\200"
  echo -ne "\000\200"
  echo -ne "\000\200"
  cnt=$(($cnt+1))
done
}

test_fb_8()
{
cnt=0
while [ "$cnt" -lt 1000 ]; do
  echo -ne "\000\000\000\000\001\001\001\001\002\002\002\002\003\003\003\003"
  echo -ne "\004\004\004\004\005\005\005\005\006\006\006\006\007\007\007\007"
  echo -ne "\010\010\010\010\011\011\011\011\012\012\012\012\013\013\013\013"
  echo -ne "\014\014\014\014\015\015\015\015\016\016\016\016\017\017\017\017"
  echo -ne "\020\020\020\020\021\021\021\021\022\022\022\022\023\023\023\023"
  echo -ne "\024\024\024\024\025\025\025\025\026\026\026\026\027\027\027\027"
  echo -ne "\030\030\030\030\031\031\031\031\032\032\032\032\033\033\033\033"
  echo -ne "\034\034\034\034\035\035\035\035\036\036\036\036\037\037\037\037"
  echo -ne "\040\040\040\040\041\041\041\041\042\042\042\042\043\043\043\043"
  echo -ne "\044\044\044\044\045\045\045\045\046\046\046\046\047\047\047\047"
  echo -ne "\050\050\050\050\051\051\051\051\052\052\052\052\053\053\053\053"
  echo -ne "\054\054\054\054\055\055\055\055\056\056\056\056\057\057\057\057"
  echo -ne "\060\060\060\060\061\061\061\061\062\062\062\062\063\063\063\063"
  echo -ne "\064\064\064\064\065\065\065\065\066\066\066\066\067\067\067\067"
  echo -ne "\070\070\070\070\071\071\071\071\072\072\072\072\073\073\073\073"
  echo -ne "\074\074\074\074\075\075\075\075\076\076\076\076\077\077\077\077"
  echo -ne "\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
  echo -ne "\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
  echo -ne "\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
  echo -ne "\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000\000"
  cnt=$(($cnt+1))
done
}

dev_fb=/dev/fb0
if [ ! -w $dev_fb ]; then
  echo "$dev_fb is NOT WRITABLE. do # su - ; chown og+w $dev_fb"
  exit 1
fi
if [ "$1" = "32" ]; then
  echo "Testing 32 Bits/Pixel ..."
  test_fb_32 >$dev_fb
elif [ "$1" = "24" ]; then
  echo "Testing 24 Bits/Pixel ..."
  test_fb_24 >$dev_fb
elif [ "$1" = "16" ]; then
  echo "Testing 16 Bits/Pixel ..."
  test_fb_16 >$dev_fb
elif [ "$1" = "15" ]; then
  echo "Testing 15 Bits/Pixel ..."
  test_fb_15 >$dev_fb
else
  echo "Testing 8 Bits/Pixel ..."
  test_fb_8 >$dev_fb
fi
